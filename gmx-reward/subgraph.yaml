specVersion: 0.0.2
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: RewardRouterV2
    network: arbitrum-one
    source:
      address: "0xA906F338CB21815cBc4Bc87ace9e68c87eF8d8F1"
      abi: RewardRouterV2
      startBlock: 4042970
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - StakeGmx
        - UnstakeGmx
        - StakeGlp
        - UnstakeGlp
      abis:
        - name: RewardRouterV2
          file: ./abis/RewardRouterV2.json
      eventHandlers:
        - event: StakeGmx(address,address,uint256)
          handler: handleStakeGmx
        - event: UnstakeGmx(address,address,uint256)
          handler: handleUnstakeGmx
        - event: StakeGlp(address,uint256)
          handler: handleStakeGlp
        - event: UnstakeGlp(address,uint256)
          handler: handleUnstakeGlp
      file: ./src/mapping.ts

  - kind: ethereum/contract
    name: StakedGmxTrackerTransfer
    network: arbitrum-one
    source:
      address: "0x908C4D94D34924765f1eDc22A1DD098397c59dD4"
      abi: RewardTracker
      startBlock: 4042970
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - StakedGmxTrackerTransfer
        - StakedGmxTrackerClaim
      abis:
        - name: RewardTracker
          file: ./abis/RewardTracker.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleStakedGmxTrackerTransfer
        - event: Claim(address,uint256)
          handler: handleStakedGmxTrackerClaim
      file: ./src/mapping.ts
  - kind: ethereum/contract
    name: StakedGlpTrackerTransfer
    network: arbitrum-one
    source:
      address: "0x1aDDD80E6039594eE970E5872D247bf0414C8903"
      abi: RewardTracker
      startBlock: 4042970
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - StakedGlpTrackerTransfer
        - StakedGlpTrackerClaim
      abis:
        - name: RewardTracker
          file: ./abis/RewardTracker.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleStakedGlpTrackerTransfer
        - event: Claim(address,uint256)
          handler: handleStakedGlpTrackerClaim
      file: ./src/mapping.ts


  - kind: ethereum/contract
    name: BonusGmxTrackerTransfer
    network: arbitrum-one
    source:
      address: "0x4d268a7d4C16ceB5a606c173Bd974984343fea13"
      abi: RewardTracker
      startBlock: 4042970
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - BonusGmxTrackerTransfer
      abis:
        - name: RewardTracker
          file: ./abis/RewardTracker.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleBonusGmxTrackerTransfer
      file: ./src/mapping.ts

  - kind: ethereum/contract
    name: FeeGmxTrackerTransfer
    network: arbitrum-one
    source:
      address: "0xd2D1162512F927a7e282Ef43a362659E4F2a728F"
      abi: RewardTracker
      startBlock: 4042970
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - FeeGmxTrackerTransfer
        - FeeGmxTrackerClaim
      abis:
        - name: RewardTracker
          file: ./abis/RewardTracker.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleFeeGmxTrackerTransfer
        - event: Claim(address,uint256)
          handler: handleFeeGmxTrackerClaim
      file: ./src/mapping.ts
  - kind: ethereum/contract
    name: FeeGlpTrackerTransfer
    network: arbitrum-one
    source:
      address: "0x4e971a87900b931fF39d1Aad67697F49835400b6"
      abi: RewardTracker
      startBlock: 4042970
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - FeeGlpTrackerTransfer
        - FeeGlpTrackerClaim
      abis:
        - name: RewardTracker
          file: ./abis/RewardTracker.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleFeeGlpTrackerTransfer
        - event: Claim(address,uint256)
          handler: handleFeeGlpTrackerClaim
      file: ./src/mapping.ts

  - kind: ethereum/contract
    name: ChainlinkAggregatorETH
    network: arbitrum-one
    source:
      address: "0x3607e46698d218B3a5Cae44bF381475C0a5e2ca7"
      abi: ChainlinkAggregator
      startBlock: 4042970
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - ChainlinkPrice
      abis:
        - name: ChainlinkAggregator
          file: ./abis/ChainlinkAggregator.json
      eventHandlers:
        - event: AnswerUpdated(indexed int256,indexed uint256,uint256)
          handler: handleAnswerUpdatedETH
      file: ./src/pricesMapping.ts
  - kind: ethereum/contract
    name: UniswapPool
    network: arbitrum-one
    source:
      address: "0x80A9ae39310abf666A87C743d6ebBD0E8C42158E"
      abi: UniswapPoolV3
      startBlock: 4042970
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - UniswapPrice
      abis:
        - name: UniswapPoolV3
          file: ./abis/UniswapPoolV3.json
      eventHandlers:
        - event: Swap(indexed address,indexed address,int256,int256,uint160,uint128,int24)
          handler: handleUniswapGmxEthSwap
      file: ./src/pricesMapping.ts